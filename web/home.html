<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>虚拟仿真实验教学管理与共享平台</title>
	<link type="text/css" rel="stylesheet" href="css/home1.css">
</head>
<body>
	<div id='head'>
		<img src='./images/head.png'>
	</div>
	<div id='main' class="p_r m_a">
        <img id='ju1' class='p_a' src='./images/ju1.png'><span id='class_r' class='p_a'>教室预约</span>
        <img id='dot' class='p_a' src='./images/dot.png'>
        <!-- <div id='two_class' class="p_r">
            <div id='clasrom1' class='room p_a'>
                <span class='span_h'>智慧教室></span>
                <div class='clasrom_img'>
                    <span class='hov' style="background: url('./images/rm1.png') no-repeat"><a>TEAL智慧教室<br>(八里台校区)<img src='./images/nm.png'></a></span>
                    <span class='hov' style="background: url('./images/rm2.png') no-repeat;"><a onclick="labInto(3)" style='width:33%;'>自主录播教室<br>(津南校区公共教学楼B516)<img src='./images/nm.png'></a></span>
                    <span class='hov' style="background: url('./images/rm3.png') no-repeat"><a>B智慧教室<br>(津南校区)<img src='./images/nm.png'></a></span>
                </div>
            </div>
            <div id='clasrom2' class='room p_a'>
                <span class='span_h'>智慧实验室></span>
                <div class='clasrom_img'>
                    <span class='hov' style="background: url('./images/rm4.png') no-repeat"><a>虚拟仿真校级<br>实验室(津南校区)<img src='./images/nm.png'></a></span>
                    <span class='hov' style="background: url('./images/rm5.png') no-repeat"><a>A智慧实验室<br>(八里台校区)<img src='./images/nm.png'></a></span>
                    <span class='hov' style="background: url('./images/rm6.png') no-repeat"><a>B智慧实验室<br>(津南校区)<img src='./images/nm.png'></a></span>
                </div>
            </div>            
        </div> 原来的2竖列模式-->
        <div id='labs' class='p_a'>
            <div id='lab1' class='labs p_r'><img src='./images/l1.png' class='p_a img_left'><a class='hov lab1' onclick="labInto(2)" style="background: url('./images/lab1.png') no-repeat"><span>TEAL智慧教室<br>(八里台校区)<img src='./images/nm.png'></span></a><a class='hov' onclick="labInto(4)" style="background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a><img src='./images/r1.png' class='p_a img_right'>
                <!--<img src='./images/l1.png' class='p_a img_left'> 
                    <a class='hov lab1' style="background: url('./images/lab1.png') no-repeat"><span>TEAL智慧教室<br>(八里台校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="background: url('./images/lab1.png') no-repeat"><span>TEAL智慧教室<br>(八里台校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab1.png') no-repeat"><span>TEAL智慧教室<br>(八里台校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab1.png') no-repeat"><span>TEAL智慧教室<br>(八里台校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a>
                <a class='hov' style="display:none; background: url('./images/lab2.png') no-repeat"><span>A智慧教室<br>(津南校区)<img src='./images/nm.png'></span></a> 
                <img src='./images/r1.png' class='p_a img_right'>-->
            </div>
            <div id='lab2' class='labs p_r'>
                <img src='./images/l1.png' class='p_a img_left'><a class='hov lab1' onclick="labInto(1)" style="background: url('./images/lab3.png') no-repeat"><span>虚拟仿真校级<br>实验室(津南校区)<img src='./images/nm.png'></span></a><a class='hov' onclick="labInto(5)" style="background: url('./images/lab4.png') no-repeat"><span>A智慧实验室<br>(八里台校区)<img src='./images/nm.png'></span></a><a class='hov' onclick="labInto(6)" style="background: url('./images/lab5.png') no-repeat"><span>B智慧实验室<br>(津南校区)<img src='./images/nm.png'></span></a><img src='./images/r1.png' class='p_a img_right'>
            </div>
            <div id='lab3' class='labs p_r'>
                <img src='./images/l1.png' class='p_a img_left'><a class='hov lab1' onclick="labInto(3)" style="background: url('./images/lab6.png') no-repeat"><span>自主录播教室<br>(津南校区公共教学楼B516)<img src='./images/nm.png'></span></a><img src='./images/r1.png' class='p_a img_right'>
            </div>
        </div>
    </div>
    <div id='foot'>
		<span>
			Copyright  2017-2020 南开大学虚拟仿真实验教学中心 ALL Rights Reserved
		</span>
	</div>
</body>
</html>
<script type="text/javascript" src="lib/jquery/3.1.1/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="js/owl.carousel.min.js"></script>
<script type="text/javascript">
  	function labInto (id) {//点击校级平台
  	    sessionStorage.setItem('platform',id);
  	    $.ajax({
            type:'post',
            url:'/api/checkLogin',
            data: {
                'platform': id,
            },
            dataType:'json',
            success:function (data) {
                if(data.code=="001"){
                	 var str = JSON.stringify(data);
                     sessionStorage.setItem("key", str);
                    // layer.msg("登录成功",{icon:1,time:500},function(){
                        window.location.href = "index.html";
                    // });
                }else{
                    // layer.msg(data.message,{icon:3});
                    window.location.href = "home.html";
                }
            },
            error:function(err){
                //console.error(err);
            }
        });
      };
      
      $(function () {//jquery 初始化
          let hov_span = $('.hov');

          hov_span.on({
            mouseenter:function(){
                $(this).find('a').css('color', '#872a62');
                $(this).find('img').attr('src', './images/ck.png');
            },
            mouseleave:function(){
                $(this).find('a').css('color', '#a1a1a1');
                $(this).find('img').attr('src', './images/nm.png');
            }
          })
       
        //3类实验室左右箭头事件效果
        var labs = $('div.labs');

        labs.each(function () {
            let t = $(this);
            let a_num = t.find('a').length;
            //console.log(a_num);
            if ( a_num > 3 )
            {
                t.find('img.img_right').css('display', 'inline-block');
            }else{
                t.find('img.img_right').css('display', 'none');
            }

            t.find('img.img_left').css('display', 'none');
        });

        var lab1 = $('#lab1');
        var lab2 = $('#lab2');
        var lab3 = $('#lab3');

        var right_img1 = lab1.find('.img_right');
        var right_img2 = lab2.find('.img_right');
        var right_img3 = lab3.find('.img_right');

        var left_img1 = lab1.find('.img_left');
        var left_img2 = lab2.find('.img_left');
        var left_img3 = lab3.find('.img_left');

        labs.find('.img_right').hover(

            function () {
                $(this).attr('src', './images/r2.png').css('cursor', 'pointer');
            },

            function () {
                $(this).attr('src', './images/r1.png');
            }
        )

        labs.find('.img_left').hover(

            function () {
                $(this).attr('src', './images/l2.png').css('cursor', 'pointer');
            },

            function () {
                $(this).attr('src', './images/l1.png');
            }
        )

        var labs1_i = 0;//第1栏右边箭头点击次数
        var labs2_i = 0;//第2栏右边箭头点击次数
        var labs3_i = 0;//第3栏右边箭头点击次数

        right_img1.click(function () {
            
            let a = lab1.find('a');
            let num = a.length;

            if ( labs1_i < num )
            {
                labs1_i += 1;
            }

            if ( labs1_i > 0 )
            {
                left_img1.css('display', '');
            }

            for ( let i = 3*(labs1_i-1); i <= 3*(labs1_i-1) + 2; i++ )
            {//每点击一次右边箭头隐藏前面三个  加载后面三个
                if ( a[i] )
                {
                    a[i].style.display = 'none';
                }

                if ( a[i+3] )
                {
                    a[i+3].style.display = '';
                }
            }

            if ( ( num - labs1_i*3 ) <= 3 )
            {//右边剩余a元素数量3个以下
                $(this).css('display', 'none');
            }

        })//right_img1 click结束

        left_img1.click(function () {
            let a = lab1.find('a');
            let num = a.length;

            for ( let i = 3*(labs1_i-1); i <= 3*(labs1_i-1) + 2; i++ )
            {//每点击一次左边箭头显示前面三个  隐藏后面三个
                if ( a[i] )
                {
                    a[i].style.display = '';
                }

                if ( a[i+3] )
                {
                    a[i+3].style.display = 'none';
                }
            }

            if ( labs1_i >= 1 )
            {
                labs1_i -= 1;
            }

            if ( labs1_i == 0 )
            {
                $(this).css('display', 'none');
            }

            if ( ( num - labs1_i*3 ) > 3 )
            {//右边剩余a元素数量3个以下
                right_img1.css('display', '');
            }
        })//left_img1 click结束

        right_img2.click(function () {
            
            let a = lab2.find('a');
            let num = a.length;

            if ( labs2_i < num )
            {
                labs2_i += 1;
            }

            if ( labs2_i > 0 )
            {
                left_img2.css('display', '');
            }

            for ( let i = 3*(labs2_i-1); i <= 3*(labs2_i-1) + 2; i++ )
            {//每点击一次右边箭头隐藏前面三个  加载后面三个
                if ( a[i] )
                {
                    a[i].style.display = 'none';
                }

                if ( a[i+3] )
                {
                    a[i+3].style.display = '';
                }
            }

            if ( ( num - labs2_i*3 ) <= 3 )
            {//右边剩余a元素数量3个以下
                $(this).css('display', 'none');
            }

        })//right_img2 click结束

        left_img2.click(function () {
            let a = lab2.find('a');
            let num = a.length;

            for ( let i = 3*(labs2_i-1); i <= 3*(labs2_i-1) + 2; i++ )
            {//每点击一次左边箭头显示前面三个  隐藏后面三个
                if ( a[i] )
                {
                    a[i].style.display = '';
                }

                if ( a[i+3] )
                {
                    a[i+3].style.display = 'none';
                }
            }

            if ( labs2_i >= 1 )
            {
                labs2_i -= 1;
            }

            if ( labs2_i == 0 )
            {
                $(this).css('display', 'none');
            }

            if ( ( num - labs2_i*3 ) > 3 )
            {//右边剩余a元素数量3个以下
                right_img2.css('display', '');
            }
        })//left_img2 click结束

        right_img3.click(function () {
            
            let a = lab3.find('a');
            let num = a.length;

            if ( labs3_i < num )
            {
                labs3_i += 1;
            }

            if ( labs3_i > 0 )
            {
                left_img3.css('display', '');
            }

            for ( let i = 3*(labs3_i-1); i <= 3*(labs3_i-1) + 2; i++ )
            {//每点击一次右边箭头隐藏前面三个  加载后面三个
                if ( a[i] )
                {
                    a[i].style.display = 'none';
                }

                if ( a[i+3] )
                {
                    a[i+3].style.display = '';
                }
            }

            if ( ( num - labs3_i*3 ) <= 3 )
            {//右边剩余a元素数量3个以下
                $(this).css('display', 'none');
            }

        })//right_img2 click结束

        left_img3.click(function () {
            let a = lab3.find('a');
            let num = a.length;

            for ( let i = 3*(labs3_i-1); i <= 3*(labs3_i-1) + 2; i++ )
            {//每点击一次左边箭头显示前面三个  隐藏后面三个
                if ( a[i] )
                {
                    a[i].style.display = '';
                }

                if ( a[i+3] )
                {
                    a[i+3].style.display = 'none';
                }
            }

            if ( labs3_i >= 1 )
            {
                labs3_i -= 1;
            }

            if ( labs3_i == 0 )
            {
                $(this).css('display', 'none');
            }

            if ( ( num - labs3_i*3 ) > 3 )
            {//右边剩余a元素数量3个以下
                right_img3.css('display', '');
            }
        })//left_img3 click结束

      })//jquery ready 结束

</script>